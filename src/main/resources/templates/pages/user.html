<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml">

<h1 th:text="'User ' + ${user.name}"></h1>

<p th:text="'Id: ' + ${user.id}"></p>

<div th:switch="${user.role}">
    <p>Role:
        <span th:case="1">User</span>
        <span th:case="2">Admin</span>
    </p>
</div>
<div th:switch="${user.role}">
    <form th:case="'1'" th:action="'/user/' + ${user.id} + '/role/2'" method="post">
        <button class="btn btn-primary">
            <i class="fas fa-chess-pawn"></i>
        </button>
    </form>
    <form th:case="'2'" th:action="'/user/' + ${user.id} + '/role/1'" method="post">
        <button class="btn btn-primary">
            <i class="fas fa-chess-king"></i>
        </button>
    </form>
</div>
<br>
<div th:if="${currentUser} == ${user}">
    <table>
        <form th:action="'/user/' + ${user.id} + '/name'" method="post">
            <tr>
                <th>Change Username</th>
            </tr>
            <tr>
                <td>Username</td>
                <td>
                    <input class="form-control" type="text" name="name" required width="400px" th:value="${user.name}">
                </td>
            </tr>
            <tr>
                <td>
                    <button class="btn btn-primary">Save Name</button>
                </td>
            </tr>
        </form>
        <tr>
            <th>Change Password</th>
        </tr>
        <form th:action="'/user/' + ${user.id} + '/password'" method="post">

            <tr>
                <td>Old Password</td>
                <td><input class="form-control" type="password" name="old" required></td>
            </tr>
            <tr>
                <td>New Password</td>
                <td><input class="form-control" type="password" name="new" required></td>
            </tr>
            <tr>
                <td>Confirm Password</td>
                <td><input class="form-control" type="password" name="name" required></td>
            </tr>
            <tr>
                <td>
                    <button class="btn btn-primary">Save Password</button>
                </td>
            </tr>
        </form>
    </table>
    <br>
    <p>Requests</p>
    <ul class="list-group">
        <li class="list-group-item" th:each="request : ${requests}">
            <span th:switch="${request.active}">
                <span th:case="1" th:text="${request.request}"></span>
                <span th:case="2" th:text="${request.request} + ' - closed'"></span>
            </span>
        </li>
    </ul>

    <a class="btn btn-link" href="/request/create">Create Request</a>

</div>

