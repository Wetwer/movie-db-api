<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<h1>
    User List
</h1>

<div class="alert alert-success" th:if="${param.added}">
    User added
</div>

<div class="alert alert-success" th:if="${param.deleted}">
    User deleted
</div>

<form action="/user" id="search">
    <div class="row">
        <br>
        <div class="col-12">
            <input autocomplete="off" class="form-control" name="search" placeholder="Search"
                   th:value="${search}" type="text">
        </div>
    </div>
</form>
<br>
<a class="btn btn-primary" href="/request/create">Request Invite</a>
<br>
<br>
<ul class="list-group">
    <li class="list-group-item" th:each="user : ${users}">
        <img class="img-thumbnail" style="max-height: 40px; min-height: 40px" th:if="${user.profileImg} != null"
             th:src="'/img/' + ${user.id}"/>
        <a class="text-white" th:href="'/user/' + ${user.id}" th:text="${user.name}"></a>
        <div class="float-right" th:if="${currentUser.isAdmin()}" th:switch="${user.isAdmin()}">
            <form method="post" th:action="'/user/' + ${user.id} + '/role/admin'" th:case="false">
                <button class="btn btn-dark">
                    <i class="fas fa-chess-pawn"></i>
                </button>
            </form>
            <form method="post" th:action="'/user/' + ${user.id} + '/role/user'" th:case="true">
                <button class="btn btn-dark">
                    <i class="fas fa-chess-king"></i>
                </button>
            </form>
        </div>
    </li>
</ul>
<div class="row" th:if="${users.isEmpty()}">
    <div class="col-sm-3" style="margin-bottom: 20px">
        <div class="alert alert-secondary">
            <a>No Users found</a>
        </div>
    </div>
</div>
<br>
<div th:if="${currentUser?.isAdmin()}">
    <a class="btn btn-primary" href="/register">New User</a>
    <br>
    <br>
</div>
<a class="btn btn-primary" href="/">Back</a>
